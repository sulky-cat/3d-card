(()=>{"use strict";var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,s=void 0,s=function(e,r){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(n,"string"),"symbol"===t(s)?s:String(s)),i)}var n,s}var o,i,n=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.options=Object.assign({cardSelector:"[data-card-hover]",distanceCoef:2},r),this.wrapper=t,this.distanceCoef=this.wrapper.dataset.distance?+this.wrapper.dataset.distance:this.options.distanceCoef,console.log(this.distance),this.rotateToMouse=this.rotateToMouse.bind(this),this.initHover=this.initHover.bind(this),this.destroyHover=this.destroyHover.bind(this),this.wrapper.closest(".touch")||this.init()}var t,o,i;return t=e,(o=[{key:"init",value:function(){this.wrapper.classList.add("_init_"),this.wrapper.addEventListener("mouseenter",this.initHover)}},{key:"destroy",value:function(){this.wrapper.classList.remove("_init_"),this.removeProperties(),this.wrapper.removeEventListener("mouseenter",this.initHover),document.removeEventListener("mousemove",this.rotateToMouse),this.wrapper.removeEventListener("mouseleave",this.destroyHover)}},{key:"initHover",value:function(){this.bounds=this.wrapper.getBoundingClientRect(),this.wrapper.classList.add("_hover_"),document.addEventListener("mousemove",this.rotateToMouse),this.wrapper.removeEventListener("mouseenter",this.rotateToMouse),this.wrapper.addEventListener("mouseleave",this.destroyHover)}},{key:"rotateToMouse",value:function(e){var t=e.clientX,r=e.clientY,o=t-this.bounds.x,i=r-this.bounds.y;this.center={x:o-this.bounds.width/2,y:i-this.bounds.height/2},this.distance=Math.sqrt(Math.pow(this.center.x,2)+Math.pow(this.center.y,2)),this.setProperties()}},{key:"destroyHover",value:function(){document.removeEventListener("mousemove",this.rotateToMouse),this.wrapper.removeEventListener("mouseleave",this.destroyHover),this.removeProperties(),this.wrapper.classList.remove("_hover_"),this.wrapper.addEventListener("mouseenter",this.initHover)}},{key:"setProperties",value:function(){this.wrapper.style.setProperty("--rotate-x","".concat(this.center.y)),this.wrapper.style.setProperty("--rotate-y","".concat(-1*this.center.x)),this.wrapper.style.setProperty("--distance","".concat(Math.log(this.distance)*this.distanceCoef,"deg")),this.wrapper.style.setProperty("--x-move","".concat(this.center.x+this.bounds.width/2,"px")),this.wrapper.style.setProperty("--y-move","".concat(this.center.y+this.bounds.height/2,"px"))}},{key:"removeProperties",value:function(){this.wrapper.style.removeProperty("--rotate-x"),this.wrapper.style.removeProperty("--rotate-y"),this.wrapper.style.removeProperty("--distance"),this.wrapper.style.removeProperty("--x-move"),this.wrapper.style.removeProperty("--y-move")}}])&&r(t.prototype,o),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),s=document.querySelectorAll("[data-wrapper-hover]");s.length&&s.forEach((function(e){new n(e,{})})),o=function(e){var t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)},(i=new Image).onload=i.onerror=function(){o(2==i.height)},i.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",e.any()&&document.documentElement.classList.add("touch")})();